import { createRequire as _createRequire } from 'node:module';
const require = _createRequire(import.meta.url);
import {
  addUserFields
} from "./chunk-CPSZ7QTC.js";
import {
  authenticateWithSiteId
} from "./chunk-KONVQLDI.js";
import {
  init_esm_shims
} from "./chunk-4EFJZ3GQ.js";

// ../cli-site-old/src/authentication.ts
init_esm_shims();
async function authenticate({
  metaSiteId,
  biLogger,
  errorReporter
}) {
  const authState = await authenticateWithSiteId(
    metaSiteId,
    biLogger,
    errorReporter
  );
  errorReporter.setUser({ id: authState.userInfo.userId });
  addUserFields(biLogger, authState.userInfo.userId);
  return authState;
}

export {
  authenticate
};
//# sourceMappingURL=chunk-DR4RSQZ7.js.map