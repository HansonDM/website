{"version":3,"sources":["../src/commands/render-command.tsx"],"sourcesContent":["import React from 'react';\nimport type { ReactElement } from 'react';\nimport { render } from '@wix/cli-ui-kit';\nimport { ErrorReporterProvider } from '@wix/cli-error-reporting';\nimport {\n  HttpClientProvider,\n  buildHttpClientHeaders,\n} from '@wix/cli-http-client-react';\nimport { BiProvider } from '@wix/cli-telemetry-react';\nimport type { CommandServices } from '@wix/cli-command-contract';\nimport type { Command } from '@commander-js/extra-typings';\nimport { PanoramaProvider } from '@wix/cli-panorama';\nimport { reportCommandStartEvent } from '../bi.js';\nimport packageJson from '../../package.json' with { type: 'json' };\n\nexport async function renderCommand(\n  command: Command,\n  { biLogger, errorReporter, panorama }: CommandServices,\n  tree: ReactElement\n) {\n  await runCommand(command, { biLogger, errorReporter, panorama }, async () => {\n    const headers = buildHttpClientHeaders({\n      flow: 'CLI',\n      command: command.name(),\n      cliVersion: packageJson.version,\n    });\n\n    await render(\n      <BiProvider value={biLogger}>\n        <ErrorReporterProvider value={errorReporter}>\n          <PanoramaProvider value={panorama}>\n            <HttpClientProvider headers={headers}>{tree}</HttpClientProvider>\n          </PanoramaProvider>\n        </ErrorReporterProvider>\n      </BiProvider>\n    );\n  });\n}\n\nasync function runCommand(\n  command: Command,\n  services: CommandServices,\n  commandFn: () => Promise<void>\n) {\n  const commandStatus = reportCommandStartEvent(services.biLogger, command);\n\n  try {\n    await commandFn();\n    commandStatus.succeed();\n  } catch (e) {\n    commandStatus.failed(e);\n    throw e;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA,mBAAkB;AAelB,eAAsB,cACpB,SACA,EAAE,UAAU,eAAe,SAAS,GACpC,MACA;AACA,QAAM,WAAW,SAAS,EAAE,UAAU,eAAe,SAAS,GAAG,YAAY;AAC3E,UAAM,UAAU,uBAAuB;AAAA,MACrC,MAAM;AAAA,MACN,SAAS,QAAQ,KAAK;AAAA,MACtB,YAAY,gBAAY;AAAA,IAC1B,CAAC;AAED,UAAM;AAAA,MACJ,6BAAAA,QAAA,cAAC,cAAW,OAAO,YACjB,6BAAAA,QAAA,cAAC,yBAAsB,OAAO,iBAC5B,6BAAAA,QAAA,cAAC,oBAAiB,OAAO,YACvB,6BAAAA,QAAA,cAAC,sBAAmB,WAAmB,IAAK,CAC9C,CACF,CACF;AAAA,IACF;AAAA,EACF,CAAC;AACH;AAEA,eAAe,WACb,SACA,UACA,WACA;AACA,QAAM,gBAAgB,wBAAwB,SAAS,UAAU,OAAO;AAExE,MAAI;AACF,UAAM,UAAU;AAChB,kBAAc,QAAQ;AAAA,EACxB,SAAS,GAAG;AACV,kBAAc,OAAO,CAAC;AACtB,UAAM;AAAA,EACR;AACF;","names":["React"]}