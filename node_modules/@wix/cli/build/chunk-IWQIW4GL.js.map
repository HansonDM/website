{"version":3,"sources":["../../cli-user-config/src/index.ts","../../cli-user-config/src/user-config.ts","../../cli-core-definitions/src/index.ts","../../velo-github-layout-definitions/build/index.js"],"sourcesContent":["export * from './user-config.js';\n","import { join } from 'node:path';\nimport { getDataDirPath } from '@wix/cli-data-dir';\nimport { pathExists, readJson, writeJson } from '@wix/cli-fs';\nimport {\n  userConfigSchema,\n  USER_CONFIG_FILENAME,\n} from '@wix/cli-core-definitions';\nimport type { UserConfig } from '@wix/cli-core-definitions';\n\nfunction getUserConfigPath() {\n  return join(getDataDirPath(), USER_CONFIG_FILENAME);\n}\n\nexport async function readUserConfig() {\n  const configPath = getUserConfigPath();\n  const isConfigExist = await pathExists(configPath);\n  const json = isConfigExist ? await readJson(configPath) : {};\n  return userConfigSchema.parse(json);\n}\n\nexport async function updateUserConfig(config: Partial<UserConfig>) {\n  const currentConfig = await readUserConfig();\n  const newConfig = {\n    ...currentConfig,\n    ...config,\n  };\n\n  const configPath = getUserConfigPath();\n  await writeJson(configPath, newConfig);\n}\n","import { join } from 'node:path';\nimport { z } from 'zod';\nimport { getGitIgnoredFolder } from '@wix/velo-github-layout-definitions';\n\nexport const SENTRY_DSN =\n  'https://d15bb47ad34c428f92d0ac434a5734eb@o37417.ingest.sentry.io/4504116669317120';\nexport const WIX_CONFIG_FILENAME = 'wix.config.json';\nexport const TS_CONFIG_FILENAME = 'tsconfig.json';\nexport const WIX_LOCK_FILENAME = 'wix.lock';\nexport const VERSION_CACHE_FILENAME = 'version.cache.json';\nexport const USER_CONFIG_FILENAME = 'user.config.json';\n\nexport const userConfigSchema = z.object({\n  telemetry: z.boolean().default(true),\n  tunneling: z.boolean().default(false),\n});\n\nexport type UserConfig = z.infer<typeof userConfigSchema>;\n\nexport function getWixConfigFilePath(projectFolder: string) {\n  return join(projectFolder, WIX_CONFIG_FILENAME);\n}\n\nexport function getTSConfigFilePath(projectFolder: string) {\n  return join(projectFolder, TS_CONFIG_FILENAME);\n}\n\nexport function getDebugLogFilePath(projectFolder: string) {\n  return join(getGitIgnoredFolder(projectFolder), 'debug.log');\n}\n\nexport function getUserFeedbackCacheFilePath(projectFolder: string) {\n  return join(getGitIgnoredFolder(projectFolder), 'user-feedback.cache.json');\n}\n\nexport function getWixLockFilePath(projectFolder: string) {\n  return join(projectFolder, WIX_LOCK_FILENAME);\n}\n","// src/index.ts\nimport { join } from \"node:path\";\nfunction getGitIgnoredFolder(projectFolder = \"\") {\n  return join(projectFolder, \".wix\");\n}\nfunction getTypesDir(projectFolder) {\n  return join(getGitIgnoredFolder(projectFolder), \"types\");\n}\nfunction getPageTypesDir(projectFolder, pageId) {\n  return join(getTypesDir(projectFolder), pageId);\n}\nfunction getPageConfigFilename(projectFolder, pageId) {\n  return join(getPageTypesDir(projectFolder, pageId), `jsconfig.json`);\n}\nfunction getBackendConfigPath(projectFolder) {\n  return join(getTypesDir(projectFolder), \"backend\", \"jsconfig.json\");\n}\nfunction getPublicConfigPath(projectFolder) {\n  return join(getTypesDir(projectFolder), \"public\", \"jsconfig.json\");\n}\nfunction getSourceFolder(projectFolder) {\n  return join(projectFolder, \"src\");\n}\nfunction getPagesFolder(projectFolder = \"\") {\n  return join(getSourceFolder(projectFolder), \"pages\");\n}\nfunction getPublicFolder(projectFolder = \"\") {\n  return join(getSourceFolder(projectFolder), \"public\");\n}\nfunction getBackendFolder(projectFolder = \"\") {\n  return join(getSourceFolder(projectFolder), \"backend\");\n}\nfunction getStylesFolder(projectFolder = \"\") {\n  return join(getSourceFolder(projectFolder), \"styles\");\n}\nvar SLASH = \"/\";\nvar ENCODED_SLASH = \"\\\\\\\\\";\nfunction encodeSlash(string) {\n  return string.replaceAll(new RegExp(SLASH, \"g\"), ENCODED_SLASH);\n}\nfunction getPageCodeFilePath(projectFolder, page, shouldEscapeSlash = false) {\n  const pageTitle = shouldEscapeSlash ? encodeSlash(page.pageTitle) : page.pageTitle;\n  return join(\n    getPagesFolder(projectFolder),\n    `${[pageTitle, page.pageMetaData.pageId].filter(Boolean).join(\".\")}.js`\n  );\n}\nexport {\n  encodeSlash,\n  getBackendConfigPath,\n  getBackendFolder,\n  getGitIgnoredFolder,\n  getPageCodeFilePath,\n  getPageConfigFilename,\n  getPageTypesDir,\n  getPagesFolder,\n  getPublicConfigPath,\n  getPublicFolder,\n  getSourceFolder,\n  getStylesFolder,\n  getTypesDir\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAAA,SAAS,QAAAA,aAAY;;;ACArB;AAAA,SAAS,QAAAC,aAAY;;;ACArB;AACA,SAAS,YAAY;AACrB,SAAS,oBAAoB,gBAAgB,IAAI;AAC/C,SAAO,KAAK,eAAe,MAAM;AACnC;AACA,SAAS,YAAY,eAAe;AAClC,SAAO,KAAK,oBAAoB,aAAa,GAAG,OAAO;AACzD;AAaA,SAAS,gBAAgB,eAAe;AACtC,SAAO,KAAK,eAAe,KAAK;AAClC;AACA,SAAS,eAAe,gBAAgB,IAAI;AAC1C,SAAO,KAAK,gBAAgB,aAAa,GAAG,OAAO;AACrD;;;ADrBO,IAAM,aACX;AACK,IAAM,sBAAsB;AAE5B,IAAM,oBAAoB;AAC1B,IAAM,yBAAyB;AAC/B,IAAM,uBAAuB;AAE7B,IAAM,mBAAmB,iBAAE,OAAO;AAAA,EACvC,WAAW,iBAAE,QAAQ,EAAE,QAAQ,IAAI;AAAA,EACnC,WAAW,iBAAE,QAAQ,EAAE,QAAQ,KAAK;AACtC,CAAC;AAIM,SAAS,qBAAqB,eAAuB;AAC1D,SAAOC,MAAK,eAAe,mBAAmB;AAChD;AAMO,SAAS,oBAAoB,eAAuB;AACzD,SAAOC,MAAK,oBAAoB,aAAa,GAAG,WAAW;AAC7D;AAEO,SAAS,6BAA6B,eAAuB;AAClE,SAAOA,MAAK,oBAAoB,aAAa,GAAG,0BAA0B;AAC5E;AAEO,SAAS,mBAAmB,eAAuB;AACxD,SAAOA,MAAK,eAAe,iBAAiB;AAC9C;;;AD5BA,SAAS,oBAAoB;AAC3B,SAAOC,MAAK,eAAe,GAAG,oBAAoB;AACpD;AAEA,eAAsB,iBAAiB;AACrC,QAAM,aAAa,kBAAkB;AACrC,QAAM,gBAAgB,MAAM,WAAW,UAAU;AACjD,QAAM,OAAO,gBAAgB,MAAM,SAAS,UAAU,IAAI,CAAC;AAC3D,SAAO,iBAAiB,MAAM,IAAI;AACpC;AAEA,eAAsB,iBAAiB,QAA6B;AAClE,QAAM,gBAAgB,MAAM,eAAe;AAC3C,QAAM,YAAY;AAAA,IAChB,GAAG;AAAA,IACH,GAAG;AAAA,EACL;AAEA,QAAM,aAAa,kBAAkB;AACrC,QAAM,UAAU,YAAY,SAAS;AACvC;","names":["join","join","join","join","join"]}