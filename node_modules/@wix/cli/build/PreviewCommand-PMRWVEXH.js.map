{"version":3,"sources":["../../cli-site/src/components/PreviewCommand/PreviewCommand.tsx"],"sourcesContent":["import React from 'react';\nimport type { FC } from 'react';\nimport { match, isType } from 'variant';\nimport { Trans } from '@wix/cli-i18n';\nimport { DeploymentStatus } from '@wix/document-management-client';\nimport { useAsync, Spinner, Alert, Badge, Link, Box } from '@wix/cli-ui-kit';\nimport { ErrorViewer } from '@wix/cli-error-reporting';\nimport { useCreatePreview } from './useCreatePreview.js';\n\ninterface Props {\n  force: boolean;\n}\n\nexport const PreviewCommand: FC<Props> = ({ force }) => {\n  const createPreview = useCreatePreview();\n\n  const { status } = useAsync(async () => {\n    const { previewUrl, deploymentStatus } = await createPreview();\n\n    if (!force && isType(deploymentStatus, DeploymentStatus.Error)) {\n      throw deploymentStatus.deploymentError;\n    }\n\n    return { previewUrl, deploymentStatus };\n  }, []);\n\n  return match(status, {\n    Error: () => null,\n    Loading: () => (\n      <Spinner text={<Trans i18nKey=\"preview_command.loading\" />} />\n    ),\n    Success: ({ result: { previewUrl, deploymentStatus } }) => (\n      <>\n        {isType(deploymentStatus, DeploymentStatus.Error) ? (\n          <Box marginBottom={1} flexDirection=\"column\">\n            <ErrorViewer error={deploymentStatus.deploymentError} />\n          </Box>\n        ) : null}\n        <Alert type=\"success\">\n          <Badge skin=\"success\">\n            <Trans i18nKey=\"general.success\" />\n          </Badge>{' '}\n          <Trans\n            i18nKey=\"preview_command.success\"\n            components={[<Link url={previewUrl} />]}\n          />\n        </Alert>\n      </>\n    ),\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA,mBAAkB;AAElB,qBAA8B;AAWvB,IAAM,iBAA4B,CAAC,EAAE,MAAM,MAAM;AACtD,QAAM,gBAAgB,iBAAiB;AAEvC,QAAM,EAAE,OAAO,IAAI,SAAS,YAAY;AACtC,UAAM,EAAE,YAAY,iBAAiB,IAAI,MAAM,cAAc;AAE7D,QAAI,CAAC,aAAS,uBAAO,kBAAkB,iBAAiB,KAAK,GAAG;AAC9D,YAAM,iBAAiB;AAAA,IACzB;AAEA,WAAO,EAAE,YAAY,iBAAiB;AAAA,EACxC,GAAG,CAAC,CAAC;AAEL,aAAO,sBAAM,QAAQ;AAAA,IACnB,OAAO,MAAM;AAAA,IACb,SAAS,MACP,6BAAAA,QAAA,cAAC,WAAQ,MAAM,6BAAAA,QAAA,cAAC,SAAM,SAAQ,2BAA0B,GAAI;AAAA,IAE9D,SAAS,CAAC,EAAE,QAAQ,EAAE,YAAY,iBAAiB,EAAE,MACnD,6BAAAA,QAAA,2BAAAA,QAAA,oBACG,uBAAO,kBAAkB,iBAAiB,KAAK,IAC9C,6BAAAA,QAAA,cAAC,eAAI,cAAc,GAAG,eAAc,YAClC,6BAAAA,QAAA,cAAC,eAAY,OAAO,iBAAiB,iBAAiB,CACxD,IACE,MACJ,6BAAAA,QAAA,cAAC,SAAM,MAAK,aACV,6BAAAA,QAAA,cAAC,SAAM,MAAK,aACV,6BAAAA,QAAA,cAAC,SAAM,SAAQ,mBAAkB,CACnC,GAAS,KACT,6BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,YAAY,CAAC,6BAAAA,QAAA,cAAC,QAAK,KAAK,YAAY,CAAE;AAAA;AAAA,IACxC,CACF,CACF;AAAA,EAEJ,CAAC;AACH;","names":["React"]}